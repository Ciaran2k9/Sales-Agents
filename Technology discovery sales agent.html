<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Thinkific Technical Discovery Helper</title>
    <meta name="description" content="Open-ended discovery flow that guides AEs to research and SE handoff." />
    <style>
      :root {
        --bg: #f3f0ea;
        --card: #ffffff;
        --ink: #1d1a16;
        --muted: #6b665f;
        --accent: #c86b3c;
        --accent-dark: #a5532c;
        --chip: #efe6db;
        --shadow: 0 12px 40px rgba(27, 20, 10, 0.12);
        --radius: 20px;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Space Grotesk", "Segoe UI", sans-serif;
        color: var(--ink);
        background: radial-gradient(circle at 20% 10%, #f6e9dc 0%, var(--bg) 45%, #efeae0 100%);
        min-height: 100vh;
      }

      .page {
        max-width: 1100px;
        margin: 0 auto;
        padding: 48px 20px 56px;
      }

      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 24px;
      }

      .header-actions {
        display: flex;
        gap: 10px;
      }

      .brand {
        font-size: 18px;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--muted);
      }

      .restart {
        background: none;
        border: none;
        color: var(--accent-dark);
        font-weight: 600;
        cursor: pointer;
        padding: 8px 10px;
        border-radius: 999px;
        transition: background 0.2s ease;
      }

      .restart[disabled] {
        cursor: not-allowed;
        opacity: 0.45;
      }

      .restart:hover,
      .restart:focus-visible {
        background: #f7e1d3;
        outline: none;
      }

      .layout {
        display: grid;
        grid-template-columns: minmax(0, 1fr) 320px;
        gap: 24px;
      }

      .card {
        background: var(--card);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 28px 28px 32px;
        display: flex;
        flex-direction: column;
        gap: 18px;
        position: relative;
        overflow: hidden;
      }

      .card::after {
        content: "";
        position: absolute;
        inset: auto -40% -60% -40%;
        height: 180px;
        background: radial-gradient(circle at 50% 0%, rgba(200, 107, 60, 0.12), transparent 70%);
      }

      .progress {
        font-size: 13px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: var(--muted);
      }

      .chips {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .chip {
        background: var(--chip);
        padding: 6px 12px;
        border-radius: 999px;
        font-size: 13px;
        color: var(--muted);
      }

      h1 {
        font-size: 26px;
        margin: 0;
      }

      .prompt {
        font-size: 18px;
        margin: 0;
        line-height: 1.5;
      }

      .info {
        margin: 0;
        padding-left: 18px;
        color: var(--muted);
      }

      .info li {
        margin-bottom: 6px;
      }

      .options {
        display: grid;
        gap: 12px;
      }

      .option-btn {
        text-align: left;
        border: 1px solid #e4d8cc;
        border-radius: 14px;
        padding: 14px 16px;
        background: #fffaf5;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        color: var(--ink);
        transition: transform 0.15s ease, border 0.15s ease, box-shadow 0.15s ease;
      }

      .option-btn:hover,
      .option-btn:focus-visible {
        transform: translateY(-1px);
        border-color: var(--accent);
        box-shadow: 0 8px 18px rgba(200, 107, 60, 0.18);
        outline: none;
      }

      .recommendation {
        background: #fff1e7;
        border-radius: 16px;
        padding: 16px;
        border: 1px solid #f1c5ae;
      }

      .recommendation h3 {
        margin: 0 0 6px;
        font-size: 18px;
      }

      .rec-points {
        margin: 10px 0 0;
        padding-left: 18px;
        color: var(--muted);
      }

      .rec-points li {
        margin-bottom: 6px;
      }

      .tag {
        display: inline-block;
        margin-top: 8px;
        padding: 4px 10px;
        border-radius: 999px;
        background: var(--accent);
        color: white;
        font-size: 12px;
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }

      .panel {
        background: var(--card);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 22px 20px;
        display: none;
        flex-direction: column;
        gap: 14px;
        height: fit-content;
      }

      .panel.visible {
        display: flex;
      }

      .panel h2 {
        font-size: 16px;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        color: var(--muted);
        margin: 0;
      }

      .talking-points {
        margin: 0;
        padding-left: 18px;
      }

      .talking-points li {
        margin-bottom: 8px;
      }

      footer {
        margin-top: 28px;
        display: flex;
        gap: 16px;
        color: var(--muted);
        font-size: 14px;
      }

      footer a {
        color: var(--muted);
        text-decoration: none;
      }

      footer a:hover {
        color: var(--accent-dark);
      }

      @media (max-width: 900px) {
        .layout {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="page">
      <header>
        <div class="brand">Thinkific Technical Discovery</div>
        <div class="header-actions">
          <button class="restart" type="button" id="backBtn">Back</button>
          <button class="restart" type="button" id="restartBtn">Start over</button>
        </div>
      </header>

      <main class="layout">
        <section class="card" aria-live="polite" aria-atomic="true" id="mainCard">
          <div class="progress" id="progressLabel">Question 1</div>
          <div class="chips" id="breadcrumbs"></div>
          <h1 id="title"></h1>
          <p class="prompt" id="prompt"></p>
          <ul class="info" id="infoList"></ul>
          <div class="recommendation" id="recommendation" hidden>
            <h3 id="recHeadline"></h3>
            <p id="recSummary"></p>
            <ul class="rec-points" id="recPoints"></ul>
            <div class="tag" id="recTag"></div>
          </div>
          <div class="options" id="options"></div>
        </section>

        <aside class="panel" id="talkingPanel">
          <h2>Talking points saved</h2>
          <ul class="talking-points" id="talkingPoints"></ul>
        </aside>
      </main>

      <footer>
        <span>Use discovery to clarify the question before looping in an SE.</span>
      </footer>
    </div>

    <script>
      const FLOW = {
        start: {
          id: "start",
          title: "Open-ended discovery",
          prompt: "Start broad. What is the customer trying to achieve?",
          info: [
            "Focus on outcomes, not features.",
            "Ask for the business goal and the learner impact.",
            "Avoid solutioning until you have the workflow."
          ],
          options: [
            { id: "capability", label: "Can Thinkific do X?", next: "open_capability" },
            { id: "data_flow", label: "Send data to X?", next: "open_data_flow" },
            { id: "reporting", label: "Report on X?", next: "open_reporting" },
            { id: "captured", label: "Captured the outcome", next: "current_state" }
          ]
        },
        open_capability: {
          id: "open_capability",
          title: "Open-ended questions: capability",
          prompt: "Use these to clarify what “X” means before answering.",
          info: [
            "What outcome are you trying to achieve with X?",
            "Who needs to use it, and what does success look like for them?",
            "Walk me through the exact workflow from start to finish.",
            "What happens if it does not work the way you expect?"
          ],
          options: [{ id: "continue", label: "Continue discovery", next: "current_state" }]
        },
        open_data_flow: {
          id: "open_data_flow",
          title: "Open-ended questions: data flow",
          prompt: "Use these to clarify the integration need.",
          info: [
            "What data do you want to send, and where should it live?",
            "What triggers the data transfer today, and how often does it run?",
            "Which system is the source of truth, and who owns it?",
            "What would a successful data sync enable for your team?"
          ],
          options: [{ id: "continue", label: "Continue discovery", next: "current_state" }]
        },
        open_reporting: {
          id: "open_reporting",
          title: "Open-ended questions: reporting",
          prompt: "Use these to clarify reporting expectations.",
          info: [
            "What decisions do you want to make from this report?",
            "Which metrics matter most, and how are they defined today?",
            "Who needs access to the report and how frequently?",
            "What is missing from your current reporting setup?"
          ],
          options: [{ id: "continue", label: "Continue discovery", next: "current_state" }]
        },
        current_state: {
          id: "current_state",
          title: "Current state",
          prompt: "How do they do this today?",
          info: [
            "Ask about the current tools, manual steps, and pain points.",
            "Capture who owns the systems involved."
          ],
          options: [{ id: "captured", label: "Documented current state", next: "desired_state" }]
        },
        desired_state: {
          id: "desired_state",
          title: "Desired workflow",
          prompt: "What does success look like end-to-end?",
          info: [
            "Map the learner journey and the admin workflow.",
            "Ask what should be automated versus manual."
          ],
          options: [{ id: "captured", label: "Captured the desired workflow", next: "constraints" }]
        },
        constraints: {
          id: "constraints",
          title: "Constraints and risks",
          prompt: "What constraints or risks should we know about?",
          info: [
            "Ask about deadlines, compliance, data sensitivity, and scale.",
            "Confirm any integrations or customizations required."
          ],
          options: [{ id: "captured", label: "Captured constraints", next: "ownership" }]
        },
        ownership: {
          id: "ownership",
          title: "Ownership",
          prompt: "Who will build and maintain the solution?",
          info: [
            "Identify internal teams, vendors, or partner agencies.",
            "Confirm what they expect Thinkific to build."
          ],
          options: [{ id: "captured", label: "Captured ownership", next: "research" }]
        },
        research: {
          id: "research",
          title: "Research check",
          prompt: "Before answering, validate with internal sources.",
          info: [
            "Search Guru for product capabilities and references.",
            "Search Slack for recent SE or PM guidance.",
            "Document relevant links for the SE request."
          ],
          options: [
            { id: "done", label: "Research complete", next: "decision_point" },
            { id: "need_more", label: "Still unclear", next: "decision_point" }
          ]
        },
        decision_point: {
          id: "decision_point",
          title: "Decision point",
          prompt: "Are you confident to answer, or do you need SE support?",
          info: [
            "If anything is unclear, escalate with a crisp SE request.",
            "Include outcome, workflow, constraints, and research links."
          ],
          options: [
            { id: "answer", label: "Answer with confidence", next: "recommend_answer" },
            { id: "se", label: "Submit SE request", next: "recommend_se" }
          ]
        },
        recommend_answer: {
          id: "recommend_answer",
          title: "Recommendation: Respond to customer",
          info: [
            "Summarize the workflow and confirm assumptions.",
            "Align on next steps and timeline."
          ],
          endRecommendation: {
            headline: "Respond and confirm understanding",
            summary: "Send a concise response that restates the outcome, workflow, and any constraints.",
            tag: "Answer"
          },
          options: [{ id: "restart1", label: "Start Over", next: "start" }]
        },
        recommend_se: {
          id: "recommend_se",
          title: "Recommendation: SE request",
          info: [
            "Submit an SE request with outcome, workflow, constraints, and links.",
            "Include Guru and Slack references to speed validation."
          ],
          endRecommendation: {
            headline: "Submit SE request with context",
            summary: "Create the SE request and schedule a follow-up to confirm feasibility.",
            tag: "SE Review"
          },
          options: [{ id: "restart2", label: "Start Over", next: "start" }]
        }
      };

      const state = {
        currentId: "start",
        breadcrumbs: [],
        talkingPoints: new Set(),
        talkingTimeline: [],
        history: []
      };

      const elements = {
        progressLabel: document.getElementById("progressLabel"),
        breadcrumbs: document.getElementById("breadcrumbs"),
        title: document.getElementById("title"),
        prompt: document.getElementById("prompt"),
        infoList: document.getElementById("infoList"),
        options: document.getElementById("options"),
        recommendation: document.getElementById("recommendation"),
        recHeadline: document.getElementById("recHeadline"),
        recSummary: document.getElementById("recSummary"),
        recPoints: document.getElementById("recPoints"),
        recTag: document.getElementById("recTag"),
        talkingPanel: document.getElementById("talkingPanel"),
        talkingPoints: document.getElementById("talkingPoints"),
        restartBtn: document.getElementById("restartBtn"),
        backBtn: document.getElementById("backBtn")
      };

      function renderNode() {
        const node = FLOW[state.currentId];
        if (!node) {
          return;
        }

        elements.title.textContent = node.title || "";
        elements.prompt.textContent = node.prompt || "";

        elements.progressLabel.textContent = node.endRecommendation
          ? "Recommendation"
          : `Question ${Math.max(1, state.breadcrumbs.length + 1)}`;

        elements.breadcrumbs.innerHTML = "";
        state.breadcrumbs.forEach((label) => {
          const chip = document.createElement("span");
          chip.className = "chip";
          chip.textContent = label;
          elements.breadcrumbs.appendChild(chip);
        });

        elements.infoList.innerHTML = "";
        if (node.info && node.info.length) {
          node.info.forEach((item) => {
            const li = document.createElement("li");
            li.textContent = item;
            elements.infoList.appendChild(li);
          });
          elements.infoList.hidden = false;
        } else {
          elements.infoList.hidden = true;
        }

        if (node.endRecommendation) {
          elements.recommendation.hidden = false;
          elements.recHeadline.textContent = node.endRecommendation.headline;
          elements.recSummary.textContent = node.endRecommendation.summary;
          elements.recTag.textContent = node.endRecommendation.tag;
          elements.recPoints.innerHTML = "";
          elements.recPoints.hidden = true;
        } else {
          elements.recommendation.hidden = true;
        }

        elements.backBtn.disabled = state.history.length === 0;

        elements.options.innerHTML = "";
        (node.options || []).forEach((option) => {
          const button = document.createElement("button");
          button.type = "button";
          button.className = "option-btn";
          button.textContent = option.label;
          button.addEventListener("click", () => handleOptionSelection(node, option));
          elements.options.appendChild(button);
        });
      }

      function handleOptionSelection(node, option) {
        if (option.href) {
          window.open(option.href, "_blank", "noopener");
          return;
        }

        if (option.next === "start") {
          reset();
          return;
        }

        state.history.push(snapshotState());
        state.breadcrumbs.push(option.label);
        addTalkingPoints(node.info, option.notes);

        if (option.next) {
          state.currentId = option.next;
          renderNode();
        }
      }

      function snapshotState() {
        return {
          currentId: state.currentId,
          breadcrumbs: [...state.breadcrumbs],
          talkingPoints: new Set(state.talkingPoints),
          talkingTimeline: [...state.talkingTimeline]
        };
      }

      function restoreState(snapshot) {
        state.currentId = snapshot.currentId;
        state.breadcrumbs = [...snapshot.breadcrumbs];
        state.talkingPoints = new Set(snapshot.talkingPoints);
        state.talkingTimeline = [...snapshot.talkingTimeline];
        renderTalkingPoints();
        renderNode();
      }

      function goBack() {
        const previous = state.history.pop();
        if (!previous) {
          return;
        }
        restoreState(previous);
      }

      function addTalkingPoints(nodeInfo = [], optionNotes = []) {
        const additions = [...(nodeInfo || []), ...(optionNotes || [])];
        additions.forEach((point) => {
          if (!state.talkingPoints.has(point)) {
            state.talkingPoints.add(point);
            state.talkingTimeline.push(point);
          }
        });
        renderTalkingPoints();
      }

      function renderTalkingPoints() {
        elements.talkingPoints.innerHTML = "";
        state.talkingTimeline.forEach((point) => {
          const li = document.createElement("li");
          li.textContent = point;
          elements.talkingPoints.appendChild(li);
        });
        elements.talkingPanel.classList.toggle("visible", state.talkingTimeline.length > 0);
      }

      function reset() {
        state.currentId = "start";
        state.breadcrumbs = [];
        state.talkingPoints.clear();
        state.talkingTimeline = [];
        state.history = [];
        renderTalkingPoints();
        renderNode();
      }

      document.addEventListener("keydown", (event) => {
        if (event.key.toLowerCase() === "r") {
          reset();
        }
      });

      elements.restartBtn.addEventListener("click", reset);
      elements.backBtn.addEventListener("click", goBack);

      renderNode();
    </script>
  </body>
</html>
